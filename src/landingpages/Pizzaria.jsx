import React, { useState } from 'react';
import './pizzaria.css';

function Pizzaria() {
  const [selectedCategory, setSelectedCategory] = useState('pizzas');
  const [carrinho, setCarrinho] = useState([]);
  const [tamanhoSelecionado, setTamanhoSelecionado] = useState({});

  const tamanhos = {
    'P': { nome: 'Pequena (4 fatias)', multiplicador: 1 },
    'M': { nome: 'M√©dia (6 fatias)', multiplicador: 1.4 },
    'G': { nome: 'Grande (8 fatias)', multiplicador: 1.8 },
    'GG': { nome: 'Gigante (12 fatias)', multiplicador: 2.3 }
  };

  const pizzas = [
    {
      id: 1,
      nome: "Margherita",
      precoBase: 35.90,
      categoria: "pizzas",
      emoji: "üçï",
      descricao: "Molho de tomate, mu√ßarela e manjeric√£o fresco",
      ingredientes: ["Molho de tomate", "Mu√ßarela", "Manjeric√£o", "Azeite"]
    },
    {
      id: 2,
      nome: "Calabresa",
      precoBase: 38.90,
      categoria: "pizzas",
      emoji: "üçï",
      descricao: "Molho de tomate, mu√ßarela, calabresa e cebola",
      ingredientes: ["Molho de tomate", "Mu√ßarela", "Calabresa", "Cebola"]
    },
    {
      id: 3,
      nome: "Portuguesa",
      precoBase: 42.90,
      categoria: "pizzas",
      emoji: "üçï",
      descricao: "Molho de tomate, mu√ßarela, presunto, ovos, cebola e azeitonas",
      ingredientes: ["Molho de tomate", "Mu√ßarela", "Presunto", "Ovos", "Cebola", "Azeitonas"]
    },
    {
      id: 4,
      nome: "Frango c/ Catupiry",
      precoBase: 45.90,
      categoria: "pizzas",
      emoji: "üçï",
      descricao: "Molho de tomate, mu√ßarela, frango desfiado e catupiry",
      ingredientes: ["Molho de tomate", "Mu√ßarela", "Frango desfiado", "Catupiry"]
    },
    {
      id: 5,
      nome: "Quatro Queijos",
      precoBase: 48.90,
      categoria: "pizzas",
      emoji: "üçï",
      descricao: "Molho de tomate, mu√ßarela, gorgonzola, provolone e parmes√£o",
      ingredientes: ["Molho de tomate", "Mu√ßarela", "Gorgonzola", "Provolone", "Parmes√£o"]
    },
    {
      id: 6,
      nome: "Chocolate c/ Morango",
      precoBase: 39.90,
      categoria: "doces",
      emoji: "üçì",
      descricao: "Chocolate ao leite, morangos frescos e leite condensado",
      ingredientes: ["Chocolate ao leite", "Morangos", "Leite condensado"]
    },
    {
      id: 7,
      nome: "Coca-Cola 2L",
      precoBase: 8.90,
      categoria: "bebidas",
      emoji: "ü•§",
      descricao: "Refrigerante Coca-Cola 2 litros gelado",
      ingredientes: ["Coca-Cola 2L"]
    },
    {
      id: 8,
      nome: "Suco Natural 1L",
      precoBase: 12.90,
      categoria: "bebidas",
      emoji: "üßÉ",
      descricao: "Suco natural de laranja, uva ou maracuj√°",
      ingredientes: ["Fruta natural 1L"]
    }
  ];

  const categorias = [
    { id: 'pizzas', nome: 'Pizzas Salgadas', emoji: 'üçï' },
    { id: 'doces', nome: 'Pizzas Doces', emoji: 'üçì' },
    { id: 'bebidas', nome: 'Bebidas', emoji: 'ü•§' }
  ];

  const produtosFiltrados = pizzas.filter(pizza => pizza.categoria === selectedCategory);

  const calcularPreco = (produto, tamanho = 'M') => {
    if (produto.categoria === 'pizzas' || produto.categoria === 'doces') {
      return produto.precoBase * tamanhos[tamanho].multiplicador;
    }
    return produto.precoBase;
  };

  const adicionarCarrinho = (produto, tamanho = 'M') => {
    const item = {
      ...produto,
      tamanho: produto.categoria === 'pizzas' || produto.categoria === 'doces' ? tamanho : null,
      preco: calcularPreco(produto, tamanho),
      id: Date.now() // ID √∫nico para o carrinho
    };
    setCarrinho([...carrinho, item]);
    alert(`${produto.nome} ${item.tamanho ? `(${tamanhos[tamanho].nome})` : ''} adicionada ao carrinho!`);
  };

  const totalCarrinho = carrinho.reduce((total, item) => total + item.preco, 0);

  const enviarPedido = () => {
    if (carrinho.length === 0) {
      alert('Adicione pizzas ao carrinho primeiro!');
      return;
    }
    
    let mensagem = "üçï *PEDIDO - Pizzaria Bella Napoli*\n\n";
    carrinho.forEach((item, index) => {
      mensagem += `${index + 1}. ${item.nome}`;
      if (item.tamanho) {
        mensagem += ` (${tamanhos[item.tamanho].nome})`;
      }
      mensagem += ` - R$ ${item.preco.toFixed(2)}\n`;
    });
    mensagem += `\nüí∞ *Total: R$ ${totalCarrinho.toFixed(2)}*\n\n`;
    mensagem += "üè† Favor informar endere√ßo completo para entrega ou confirmar retirada na pizzaria.";
    
    const numeroWhatsApp = "5511555544444";
    const urlWhatsApp = `https://wa.me/${numeroWhatsApp}?text=${encodeURIComponent(mensagem)}`;
    window.open(urlWhatsApp, '_blank');
  };

  return (
    <div className="pizzaria">
      {/* Header */}
      <header className="header">
        <div className="container">
          <div className="logo">
            <span className="logo-icon">üçï</span>
            <h1>Pizzaria Bella Napoli</h1>
          </div>
          
          <nav className="nav">
            <a href="#inicio">In√≠cio</a>
            <a href="#cardapio">Card√°pio</a>
            <a href="#sobre">Sobre</a>
            <a href="#contato">Contato</a>
          </nav>

          <div className="carrinho-info">
            <span className="carrinho-icon">üõí</span>
            <span className="carrinho-count">{carrinho.length}</span>
            <span className="carrinho-total">R$ {totalCarrinho.toFixed(2)}</span>
            {carrinho.length > 0 && (
              <button className="btn-finalizar-header" onClick={enviarPedido}>
                Finalizar
              </button>
            )}
          </div>
        </div>
      </header>

      {/* Hero Section */}
      <section id="inicio" className="hero">
        <div className="hero-content">
          <h2>Aut√™ntica Pizza Italiana</h2>
          <p>Desde 1995 preparando pizzas com a tradicional receita italiana, massa artesanal e ingredientes frescos importados</p>
          <div className="hero-features">
            <div className="feature">
              <span>üáÆüáπ</span>
              <p>Receita<br/>Italiana</p>
            </div>
            <div className="feature">
              <span>üî•</span>
              <p>Forno<br/>a Lenha</p>
            </div>
            <div className="feature">
              <span>üßÄ</span>
              <p>Queijos<br/>Importados</p>
            </div>
            <div className="feature">
              <span>üöö</span>
              <p>Entrega<br/>45min</p>
            </div>
          </div>
          <button className="cta-button" onClick={() => document.getElementById('cardapio').scrollIntoView()}>
            Ver Card√°pio
          </button>
        </div>
      </section>

      {/* Card√°pio */}
      <section id="cardapio" className="cardapio">
        <div className="container">
          <h2>Nosso Delicioso Card√°pio</h2>
          
          {/* Filtros */}
          <div className="filtros">
            {categorias.map(categoria => (
              <button
                key={categoria.id}
                className={`filtro ${selectedCategory === categoria.id ? 'ativo' : ''}`}
                onClick={() => setSelectedCategory(categoria.id)}
              >
                <span>{categoria.emoji}</span>
                {categoria.nome}
              </button>
            ))}
          </div>

          {/* Grid de Produtos */}
          <div className="produtos-grid">
            {produtosFiltrados.map(produto => (
              <div key={produto.id} className="produto-card">
                <div className="produto-header">
                  <span className="emoji-produto">{produto.emoji}</span>
                  <div className="produto-badge">Artesanal</div>
                </div>
                <div className="produto-info">
                  <h3>{produto.nome}</h3>
                  <p className="descricao">{produto.descricao}</p>
                  <div className="ingredientes">
                    <strong>Ingredientes:</strong>
                    <div className="ingredientes-list">
                      {produto.ingredientes.map((ingrediente, index) => (
                        <span key={index} className="ingrediente">{ingrediente}</span>
                      ))}
                    </div>
                  </div>
                  
                  {(produto.categoria === 'pizzas' || produto.categoria === 'doces') ? (
                    <div className="tamanhos-secao">
                      <strong>Escolha o tamanho:</strong>
                      <div className="tamanhos-grid">
                        {Object.entries(tamanhos).map(([tamanho, info]) => (
                          <div key={tamanho} className="tamanho-opcao">
                            <div className="tamanho-info">
                              <span className="tamanho-nome">{tamanho}</span>
                              <span className="tamanho-desc">{info.nome}</span>
                              <span className="tamanho-preco">R$ {calcularPreco(produto, tamanho).toFixed(2)}</span>
                            </div>
                            <button 
                              className="btn-adicionar-tamanho"
                              onClick={() => adicionarCarrinho(produto, tamanho)}
                            >
                              Adicionar
                            </button>
                          </div>
                        ))}
                      </div>
                    </div>
                  ) : (
                    <div className="produto-footer">
                      <div className="preco">R$ {produto.precoBase.toFixed(2)}</div>
                      <button 
                        className="btn-adicionar"
                        onClick={() => adicionarCarrinho(produto)}
                      >
                        <span>üõí</span>
                        Adicionar
                      </button>
                    </div>
                  )}
                </div>
              </div>
            ))}
          </div>
        </div>
      </section>

      {/* Tradi√ß√£o */}
      <section className="tradicao">
        <div className="container">
          <h2>Tradi√ß√£o Italiana Desde 1995</h2>
          <div className="tradicao-grid">
            <div className="tradicao-item">
              <span className="icon">üë®‚Äçüç≥</span>
              <h3>Fam√≠lia Italiana</h3>
              <p>Fundada pelo Nono Giuseppe, trazendo receitas tradicionais diretamente da It√°lia para sua mesa.</p>
            </div>
            <div className="tradicao-item">
              <span className="icon">üî•</span>
              <h3>Forno a Lenha Original</h3>
              <p>Nosso forno a lenha de 1995 garante o sabor aut√™ntico e a textura perfeita em cada pizza.</p>
            </div>
            <div className="tradicao-item">
              <span className="icon">üåæ</span>
              <h3>Massa Artesanal</h3>
              <p>Massa preparada diariamente com fermenta√ß√£o natural de 24 horas, como manda a tradi√ß√£o.</p>
            </div>
            <div className="tradicao-item">
              <span className="icon">üßÄ</span>
              <h3>Ingredientes Importados</h3>
              <p>Queijos, molhos e temperos selecionados e importados diretamente da It√°lia.</p>
            </div>
          </div>
        </div>
      </section>

      {/* Sobre */}
      <section id="sobre" className="sobre">
        <div className="container">
          <div className="sobre-content">
            <div className="sobre-text">
              <h2>Nossa Hist√≥ria</h2>
              <p>Em 1995, Giuseppe Rossi chegou ao Brasil trazendo na bagagem o sonho de compartilhar o aut√™ntico sabor da pizza italiana. Com uma receita passada de gera√ß√£o em gera√ß√£o na fam√≠lia, ele abriu a Pizzaria Bella Napoli.</p>
              <p>Hoje, quase 30 anos depois, continuamos fi√©is √†s tradi√ß√µes: massa artesanal, fermenta√ß√£o natural, forno a lenha e ingredientes da mais alta qualidade. Nossa pizza n√£o √© apenas comida, √© uma experi√™ncia cultural italiana.</p>
              <p><em>"Ogni pizza √® fatta con amore"</em> - Giuseppe Rossi</p>
              <div className="certificacoes">
                <div className="certificacao">
                  <span>üèÜ</span>
                  <div>
                    <strong>Certificado Authentic Italian</strong>
                    <p>Reconhecimento oficial da Associa√ß√£o Italiana</p>
                  </div>
                </div>
                <div className="certificacao">
                  <span>‚≠ê</span>
                  <div>
                    <strong>5 Estrelas no TripAdvisor</strong>
                    <p>Avalia√ß√£o dos nossos clientes</p>
                  </div>
                </div>
              </div>
            </div>
            <div className="giuseppe-foto">
              <div className="foto-container">
                <span>üë®‚Äçüç≥</span>
                <p><strong>Giuseppe Rossi</strong><br/>
                Fundador e Pizzaiolo Master<br/>
                <em>"La tradizione continua"</em></p>
              </div>
            </div>
          </div>
        </div>
      </section>

      {/* Depoimentos */}
      <section className="depoimentos">
        <div className="container">
          <h2>Depoimentos dos Nossos Clientes</h2>
          <div className="depoimentos-grid">
            <div className="depoimento">
              <div className="estrelas">‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê</div>
              <p>"A melhor pizza da cidade! Massa fininha, ingredientes frescos e sabor aut√™ntico. √â como estar na It√°lia!"</p>
              <div className="cliente">
                <span className="avatar">üë®</span>
                <div>
                  <strong>Marco Silva</strong>
                  <span>Cliente h√° 8 anos</span>
                </div>
              </div>
            </div>
            <div className="depoimento">
              <div className="estrelas">‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê</div>
              <p>"Tradi√ß√£o familiar que se mant√©m. A pizza quattro formaggi √© divina! Ambiente acolhedor e atendimento perfeito."</p>
              <div className="cliente">
                <span className="avatar">üë©</span>
                <div>
                  <strong>Lucia Martins</strong>
                  <span>Cliente h√° 12 anos</span>
                </div>
              </div>
            </div>
            <div className="depoimento">
              <div className="estrelas">‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê</div>
              <p>"Depois de viajar pela It√°lia, posso dizer que aqui tem o sabor mais pr√≥ximo do original. Parab√©ns!"</p>
              <div className="cliente">
                <span className="avatar">üë®‚Äçüíº</span>
                <div>
                  <strong>Carlos Roberto</strong>
                  <span>Cliente h√° 6 anos</span>
                </div>
              </div>
            </div>
          </div>
        </div>
      </section>

      {/* Hor√°rio e Entrega */}
      <section className="horario-entrega">
        <div className="container">
          <div className="info-grid">
            <div className="horario">
              <h3>üïê Hor√°rio de Funcionamento</h3>
              <div className="horario-item">
                <span>Ter√ßa a Quinta:</span>
                <span>18h √†s 23h</span>
              </div>
              <div className="horario-item">
                <span>Sexta e S√°bado:</span>
                <span>18h √†s 00h</span>
              </div>
              <div className="horario-item">
                <span>Domingo:</span>
                <span>18h √†s 22h</span>
              </div>
              <div className="horario-item">
                <span>Segunda:</span>
                <span>Fechado</span>
              </div>
              <p className="destaque">üçï Massas preparadas fresh daily!</p>
            </div>
            
            <div className="entrega">
              <h3>üöö Delivery & Retirada</h3>
              <div className="entrega-item">
                <span>üìç √Årea de Entrega:</span>
                <span>Raio de 5km</span>
              </div>
              <div className="entrega-item">
                <span>üí∞ Taxa de Entrega:</span>
                <span>R$ 5,00</span>
              </div>
              <div className="entrega-item">
                <span>‚è±Ô∏è Tempo de Entrega:</span>
                <span>30-45 minutos</span>
              </div>
              <div className="entrega-item">
                <span>üçï Pedido M√≠nimo:</span>
                <span>R$ 25,00</span>
              </div>
            </div>
          </div>
        </div>
      </section>

      {/* Contato */}
      <section id="contato" className="contato">
        <div className="container">
          <h2>Fa√ßa seu Pedido</h2>
          <div className="contato-grid">
            <div className="contato-info">
              <h3>Como Pedir</h3>
              <div className="info-item">
                <span>üì±</span>
                <div>
                  <strong>WhatsApp</strong>
                  <p>(11) 9 5555-4444</p>
                  <small>Pedidos r√°pidos pelo WhatsApp!</small>
                </div>
              </div>
              <div className="info-item">
                <span>üìû</span>
                <div>
                  <strong>Telefone</strong>
                  <p>(11) 1111-9999</p>
                  <small>Atendimento direto da pizzaria</small>
                </div>
              </div>
              <div className="info-item">
                <span>üè™</span>
                <div>
                  <strong>Balc√£o</strong>
                  <p>Via Roma, 456 - Centro</p>
                  <small>Venha experimentar no local!</small>
                </div>
              </div>
            </div>
            
            <div className="contato-form">
              <h3>Nossa Localiza√ß√£o</h3>
              <div className="endereco-completo">
                <p><strong>üìç Endere√ßo:</strong></p>
                <p>Via Roma, 456<br/>
                Centro - S√£o Paulo/SP<br/>
                CEP: 01234-567</p>
                
                <p><strong>üöá Como Chegar:</strong></p>
                <p>‚Ä¢ Metr√¥: Esta√ß√£o Centro (200m)<br/>
                ‚Ä¢ √înibus: Linhas 150, 250, 350<br/>
                ‚Ä¢ Refer√™ncia: Pr√≥ximo √† Pra√ßa It√°lia</p>
                
                <div className="pagamento">
                  <p><strong>üí≥ Formas de Pagamento:</strong></p>
                  <div className="pagamento-opcoes">
                    <span>üíµ Dinheiro</span>
                    <span>üí≥ Cart√£o de Cr√©dito</span>
                    <span>üì± PIX</span>
                    <span>üçî Vale Refei√ß√£o</span>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </section>

      {/* Footer */}
      <footer className="footer">
        <div className="container">
          <div className="footer-content">
            <div className="footer-section">
              <h4>üçï Pizzaria Bella Napoli</h4>
              <p>Tradi√ß√£o italiana desde 1995. Cada pizza √© preparada com amor e os melhores ingredientes da It√°lia.</p>
              <div className="social-links">
                <a href="#" aria-label="WhatsApp">üí¨</a>
                <a href="#" aria-label="Instagram">üì∑</a>
                <a href="#" aria-label="Facebook">üìò</a>
                <a href="#" aria-label="TripAdvisor">‚úàÔ∏è</a>
              </div>
            </div>
            
            <div className="footer-section">
              <h4>Pizzas Favoritas</h4>
              <ul>
                <li><a href="#cardapio">üçï Margherita</a></li>
                <li><a href="#cardapio">üçï Quattro Formaggi</a></li>
                <li><a href="#cardapio">üçï Calabresa</a></li>
                <li><a href="#cardapio">üçì Doces Especiais</a></li>
              </ul>
            </div>
            
            <div className="footer-section">
              <h4>Atendimento</h4>
              <ul>
                <li><a href="#contato">Fazer Pedido</a></li>
                <li><a href="#">√Årea de Entrega</a></li>
                <li><a href="#">Card√°pio Completo</a></li>
                <li><a href="#">Reserva de Mesa</a></li>
              </ul>
            </div>
            
            <div className="footer-section">
              <h4>Contato</h4>
              <p>üì± (11) 9 5555-4444</p>
              <p>üìû (11) 1111-9999</p>
              <p>üìç Via Roma, 456 - Centro</p>
              <p>üïê Ter-Dom: 18h-23h</p>
            </div>
          </div>
          
          <div className="footer-bottom">
            <p>&copy; 2024 Pizzaria Bella Napoli. Tutti i diritti riservati.</p>
            <p>Desenvolvido com ‚ù§Ô∏è pela F√°brica de Sites</p>
          </div>
        </div>
      </footer>

      {/* Carrinho Resumo */}
      {carrinho.length > 0 && (
        <div className="carrinho-resumo">
          <div className="carrinho-header">
            <h4>Seu Pedido ({carrinho.length} itens)</h4>
            <button onClick={() => setCarrinho([])} className="limpar-carrinho">üóëÔ∏è</button>
          </div>
          <div className="carrinho-itens">
            {carrinho.slice(-3).map((item, index) => (
              <div key={index} className="carrinho-item">
                <span>{item.emoji} {item.nome}</span>
                {item.tamanho && <span className="item-tamanho">({item.tamanho})</span>}
                <span>R$ {item.preco.toFixed(2)}</span>
              </div>
            ))}
            {carrinho.length > 3 && (
              <div className="mais-itens">
                + {carrinho.length - 3} itens...
              </div>
            )}
          </div>
          <div className="carrinho-total-box">
            <strong>Total: R$ {totalCarrinho.toFixed(2)}</strong>
          </div>
          <button className="finalizar-pedido" onClick={enviarPedido}>
            Finalizar Pedido via WhatsApp
          </button>
        </div>
      )}

      {/* WhatsApp Float */}
      <a 
        href="https://wa.me/5511555544444" 
        className="whatsapp-float"
        target="_blank"
        rel="noopener noreferrer"
        aria-label="WhatsApp"
      >
        <span>üí¨</span>
        <span className="whatsapp-text">Pedir</span>
      </a>
    </div>
  );
}

export default Pizzaria;